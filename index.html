<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyWebsite</title>

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="win.css">
    <!-- <link rel="stylesheet" href="mac.css"> -->
    <style>

    </style>
</head>
<body>
    <div class="taskbar panel-bottom">
        <div class="task-btn task-hover"></div>
        <div class="task-apps"></div>
        <div class="task-btn task-panel-divider-right"></div>
        <div class="task-btn task-hover task-tray"></div>
        <div class="task-btn task-hover task-calender"></div>
        <div class="task-btn task-hover task-notifications"></div>
        <div class="task-btn task-hover task-show-desktop"></div>
    </div>
    <div class="viewport">
        <div class="wallpaper"></div>
        <div class="window">
            <div class="ctrl-btns">
                <div class="btn-min"></div>
                <div class="btn-max"></div>
                <div class="btn-close"></div>
            </div>
        </div>
    </div>


    <!-- <script src="index.js"></script> -->
    <script>
        var elem = document.getElementsByClassName("task-btn")[0];
        elem.classList.toggle("start-btn");
        elem.style.backgroundImage = "url(assets/start-win.svg)";

        var apps = document.getElementsByClassName("task-apps")[0];
        var createAppBtn = function(imgPath) {
            var elem = document.createElement('div');
            elem.classList.add("task-btn");
            elem.classList.add("task-hover");
            elem.style.backgroundImage = "url("+imgPath+")";
            return elem;
        }
        var paths = [
            "assets/notepad.png",
            "assets/chromium-browser.png",
            "assets/system-file-manager.png",
            "assets/softwarecenter.png",
        ]
        paths.forEach(imgPath => {
            apps.appendChild(createAppBtn(imgPath));
        });
        apps.children[2].classList.toggle("task-active");

        var win = document.getElementsByClassName("window")[0];
        win.onmousedown = ev => {
            let compStyle = window.getComputedStyle(win);
            let px = parseFloat(compStyle.getPropertyValue('left'));
            let py = parseFloat(compStyle.getPropertyValue('top'));
            win._offsetX = ev.pageX - px;
            win._offsetY = ev.pageY - py;

            document.onmousemove = ev => {
                win.style.left = (ev.pageX - win._offsetX).toString() + 'px';
                win.style.top = (ev.pageY - win._offsetY).toString() + 'px';
            }
        }
        win.onmouseup = ev => {
            document.onmousemove = null;
        }

        var calender = document.getElementsByClassName("task-calender")[0];
        var d = new Date();
        var t = new Intl.DateTimeFormat('default',
                {
                    hour12: true,
                    hour: 'numeric',
                    minute: 'numeric'
                }).format(d);
        calender.innerHTML = "<center>"+t.toUpperCase()+"<br>"+d.toLocaleDateString()+"<center>";
    </script>
</body>
</html>